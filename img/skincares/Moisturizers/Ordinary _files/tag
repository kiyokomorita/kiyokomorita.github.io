BrightTag.site('QMQtIZJ',function(s){
s.dbe('link :: validation error messages', '(function () {\r\n  if (typeof eventObject \x3d\x3d\x3d \x27undefined\x27) {\r\n    return;\r\n  }\r\n  var errors \x3d Sephora.analytics.utils.getMostRecentEventProperty({ \r\n    eventObject: eventObject || {},\r\n    pathToProperty: \x27eventInfo.attributes.validationErrorMessages\x27, \r\n    fallBackEventName: Sephora.analytics.constants.LINK_TRACKING_EVENT\r\n  });\r\n  return (errors || []).join(\x22,\x22) || null; \r\n}());',{pageId:4070462});
s.dbe('user :: accepted advertising cookies', '(function () {\r\n  var adString \x3d \x27advertising cookies:\x27;\r\n  if (bt_cookie(\x27ccpaConsentCookie\x27)\x3d\x3d\x3d\x271\x27) {\r\n     adString+\x3d\x27off\x27;\r\n  } else {\r\n     adString+\x3d\x27on\x27;\r\n  }\r\n  return adString;\r\n})();',{pageId:4070462});
s.dbe('pixel :: braze :: variation name', 'Sephora.variation_name;',{pageId:4070462});
s.dbe('pixel :: braze :: campaign name', '(function () {\r\n  return Sephora.campaign_name;\r\n})();',{pageId:4070462});
s.dbe('pixel :: braze :: user id', 'Sephora.user_id_for_braze',{pageId:4070462});
s.domready(function(){
s.tag('\x3cscript type\x3d\x22text/javascript\x22\x3e\n        (function(){\n          var _t \x3d {};\n          _t.events \x3d (""+'+s.dataref("link :: event strings")+');\n          if (_t.events.indexOf(\x27\x3d\x27) \x3e -1) {\n            var newEvents \x3d _t.events;\n              for (i \x3d 0; i \x3c\x3d newEvents.split(\x27\x3d\x27).length; i++) {\n                newEvents \x3d newEvents.replace(/\x3d\\d+/g,\x27\x27);\n              }\n            _t.linkTrackEvents \x3d newEvents;\n          } else {\n            _t.linkTrackEvents \x3d _t.events;\n          }\n          _t.linkType \x3d "o";\n          _t.products \x3d (""+'+s.dataref("link :: product strings")+');\n          var _h \x3d [];\n          BrightTag.each([{key:"list1",value:'+s.dataref("link :: filter selections")+'},{key:"eVar19",value:'+s.dataref("link :: platform")+'},{key:"eVar20",value:'+s.dataref("beauty board :: photo id")+'},{key:"eVar21",value:'+s.dataref("link :: experience")+'},{key:"eVar23",value:'+s.dataref("color iq :: save to profile")+'},{key:"eVar24",value:'+s.dataref("link :: video name")+'},{key:"eVar32",value:'+s.dataref("link :: external recommendation info")+'},{key:"eVar56",value:'+s.dataref("link :: happening filters")+'},{key:"eVar61",value:'+s.dataref("link :: sku type")+'},{key:"eVar62",value:'+s.dataref("link :: language locale")+'},{key:"eVar63",value:'+s.dataref("link :: evar63")+'},{key:"eVar64",value:'+s.dataref("link :: previous navigation information")+'},{key:"eVar65",value:'+s.dataref("link :: user input")+'},{key:"eVar66",value:'+s.dataref("link :: server response")+'},{key:"eVar71",value:'+s.dataref("link :: bi real-time point status")+'},{key:"eVar72",value:'+s.dataref("link :: add to basket location")+'},{key:"eVar75",value:'+s.dataref("link :: internal campaign string")+'},{key:"eVar93",value:'+s.dataref("link :: page type")+'},{key:"eVar94",value:'+s.dataref("link :: page detail")+'},{key:"eVar95",value:'+s.dataref("link :: page world")+'},{key:"eVar97",value:'+s.dataref("link :: page name")+'},{key:"eVar107",value:'+s.dataref("link :: bichiptype")+'},{key:"eVar110",value:'+s.dataref("link :: external recommendation info")+'},{key:"prop6",value:'+s.dataref("link :: previous page")+'},{key:"prop20",value:'+s.dataref("link :: search criteria")+'},{key:"prop21",value:'+s.dataref("link :: product answers keyword")+'},{key:"prop28",value:'+s.dataref("link :: field errors")+'},{key:"prop29",value:'+s.dataref("link :: validation error messages")+'},{key:"prop34",value:'+s.dataref("user :: accepted advertising cookies")+'},{key:"prop46",value:"D\\x3dv62"},{key:"prop48",value:'+s.dataref("link :: error messages")+'},{key:"prop55",value:'+s.dataref("link :: action info")+'},{key:"eVar18",value:'+s.dataref("pixel :: braze :: user id")+'},{key:"eVar114",value:'+s.dataref("pixel :: braze :: variation name")+'},{key:"eVar115",value:'+s.dataref("pixel :: braze :: campaign name")+'}], function (param) {\n            _t[param.key] \x3d param.value;\n            _h.push(param.key);\n          });\n          if (!!_t.products) { _h.push(\x22products\x22); }\n          if (_h.length\x3e0) {\n            _h \x3d _h.join(\x22,\x22);\n            _t.linkTrackVars \x3d _h;\n          }\n          s.tl( (1\x3d\x3d\x3d1 ? true : this), _t.linkType, (""+'+s.dataref("link :: link name")+'), _t);\n          if(true \x26\x26 s.clearVars){\n            s.clearVars();\n          }\n        })();\n      \x3c/script\x3e',{tagId:7512312});
s.tag('\x3cscript\x3e\n(function () {\n    function getEventAttribute(attributePath) {\n        return Sephora.analytics.utils.getMostRecentEventProperty({\n            pathToProperty: attributePath,\n            fallBackEventName: Sephora.analytics.constants.LINK_TRACKING_EVENT\n        });\n    }\n    \n    var linkName \x3d getEventAttribute(\x22eventInfo.attributes.linkName\x22);\n    var actionInfo \x3d getEventAttribute(\x22eventInfo.attributes.actionInfo\x22);\n\n    var isAddToBasket \x3d (linkName \x3d\x3d\x3d \x22Add To Basket\x22 || actionInfo \x3d\x3d\x3d \x22Add Sample To Basket\x22);\n\n    if (isAddToBasket) {\n        linkName \x3d \x22Add To Basket\x22;\n    }\n\n    // To disable tracking for event, update below condition to false   \n    var allowTracking \x3d isAddToBasket;\n    \n    if (allowTracking) {\n        var languageLocale \x3d digitalData.page.attributes.languageLocale.toLowerCase();\n        var pageTitle \x3d digitalData.page.attributes.sephoraPageInfo.pageName;\n        var biAccountId \x3d digitalData.user[0].segment.biAccountId;\n        var profileId \x3d digitalData.user[0].profile[0].profileInfo.profileID;\n        var biStatus \x3d digitalData.user[0].segment.biStatus;\n        var biPoints \x3d digitalData.user[0].segment.biPoints;\n        var platform \x3d digitalData.page.attributes.platform;\n        var emailId \x3d digitalData.user[0].profile[0].profileInfo.email;\n    \n    \n        function getSkuPrice() {\n            if (digitalData.product \x3d\x3d\x3d null) {\n                return null;\n            } else {\n                return digitalData.product[0] \x26\x26 digitalData.product[0].attributes \x26\x26 digitalData.product[0].attributes.price;\n            }\n        }\n    \n        function getProductNthLevelCategory() {\n            if (digitalData.product \x26\x26 digitalData.product[0]) {\n                return digitalData.product[0].attributes \x26\x26 digitalData.product[0].attributes.nthLevelCategory || \x27no category\x27;\n            }\n        }\n    \n        // Add to Basket attributes\n        var productId \x3d getEventAttribute(\x22eventInfo.attributes.skuId\x22);\n        var skuQuantity \x3d 1;\n        var skuPrice \x3d getSkuPrice();\n        var skuBrand \x3d (digitalData.product[0] \x26\x26 digitalData.product[0] \x26\x26 digitalData.product[0].productInfo.manufacturer || \x27none\x27).toLowerCase();\n        var categoryId \x3d getProductNthLevelCategory();\n        var currency \x3d digitalData.page.pageInfo.country \x3d\x3d\x3d \x27US\x27 ? \x27USD\x27 : \x27CAD\x27;\n    \n        var dataToSend \x3d {\n            // Browser, user Info\n            ul: languageLocale,\n            t: pageTitle,\n            bi: biAccountId,\n            pi: profileId,\n            bt: biStatus,\n            bp: biPoints,\n            pt: platform,\n            emi: emailId,\n    \n            //Add to Basket event Info\n            sv04: productId,\n            sv05: skuQuantity,\n            sv06: skuPrice,\n            sv07: skuBrand,\n            sv08: categoryId,\n            sv09: currency\n        };\n    \n        (window.sephoraOneTag_cmds \x3d window.sephoraOneTag_cmds || []).push([\x27trackEvent\x27, linkName, dataToSend]);\n    }\n})();\n\x3c/script\x3e',{tagId:7512393});
});
});
