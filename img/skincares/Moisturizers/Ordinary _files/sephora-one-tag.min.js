(()=>{var e={380:e=>{var t={config:{baseURL:"//qa-api-developer.sephora.com/v1/sot",debug:!1,allowTracking:!0,useSendBeacon:!0,apiKey:"JJZW6eiIX6W8s9Fm7vQ3v3pzj2flTOYm",cookieSetTimeout:100},util:{readCookie:function(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return null},log:function(e){t.config.debug&&console.log(e)}},setConfig:function(e){for(var t in e)e.hasOwnProperty(t)&&(this.config[t]=e[t])},commandQueue:function(){}};t.commandQueue.prototype={loadCmds:function(e){this.asyncCmds=e},push:function(e,o){var n=Array.prototype.slice.call(e,1),i="SephoraOneTagTracker",a=e[0];void 0===window[i]&&(t.util.log("Sephora One Tag :: Creating Tracker."),window[i]=new t.tracker),t.config.allowTracking?(window[i][a].apply(window[i],n),o&&"function"==typeof o&&o()):t.util.log("Sephora One Tag :: Tracking is disabled")},process:function(){var e=this;this.asyncCmds&&this.asyncCmds.length>0&&this.push(this.asyncCmds.shift(),(function(){e.asyncCmds.length>0&&e.process()}))}},t.tracker=function(){},t.tracker.prototype={screenResolution:function(){return window.screen.width+"x"+window.screen.height},viewportSize:function(){var e=new Object;return e.width=window.innerWidth?window.innerWidth:document.body.offsetWidth,e.height=window.innerHeight?window.innerHeight:document.body.offsetHeight,e.width+"x"+e.height},pagePerformance:function(){var e=window.performance.timing,t=e.loadEventEnd-e.navigationStart;return{dlt:e.domainLookupEnd-e.domainLookupStart,pdt:e.responseEnd-e.responseStart,tct:e.connectEnd-e.connectStart,srt:e.responseStart-e.requestStart,dit:e.domInteractive-e.navigationStart,clt:e.domContentLoadedEventEnd-e.navigationStart,plt:t}},trackPageView:function(e){t.util.log("Sephora One Tag :: Tracking page view");var o=this,n={sr:this.screenResolution(),vs:this.viewportSize(),cs:document.characterSet,cd:window.screen.colorDepth,je:navigator.javaEnabled(),hn:window.location.hostname,p:document.location.pathname,url:document.location.href,r:document.referrer,st:"Page View",apikey:t.config.apiKey},i=this.pagePerformance();for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a]);for(var a in e)e.hasOwnProperty(a)&&(n[a]=e[a]);this.checkAndCreateSotID((function(e){n.sti=t.util.readCookie("sti"),!n.sti&&e&&(n.sti=e),o.createOrExtendSessionID(e),n.ssi=t.util.readCookie("ssi"),o.callTrackAPI(n)}))},trackEvent:function(e,o){t.util.log("Sephora One Tag :: Tracking event");var n=this,i={sr:this.screenResolution(),vs:this.viewportSize(),cs:document.characterSet,cd:window.screen.colorDepth,je:navigator.javaEnabled(),hn:window.location.hostname,p:document.location.pathname,url:document.location.href,r:document.referrer,st:e,apikey:t.config.apiKey};for(var a in o)o.hasOwnProperty(a)&&(i[a]=o[a]);this.checkAndCreateSotID((function(e){i.sti=t.util.readCookie("sti"),!i.sti&&e&&(i.sti=e),n.createOrExtendSessionID(e),i.ssi=t.util.readCookie("ssi"),n.callTrackAPI(i)}))},checkAndCreateSotID:function(e){var o=t.util.readCookie("sti");if(o)t.util.log("Sephora One Tag :: sotTrackingId(sti) found :: "+o),e();else{t.util.log("Sephora One Tag :: sotTrackingId not found");var n=new XMLHttpRequest;n.onreadystatechange=function(){if(n.readyState===XMLHttpRequest.DONE){var o,i,a=n.status;0===a||a>=200&&a<400?(o=n.response,t.util.log("Sephora One Tag :: Setup of sotTrackingId(sti) cookie successfull! :: "+o)):t.util.log("Sephone One Tag :: Setup of sotTrackingId(sti) cookie failed."),o&&(o=JSON.parse(o)),o&&o.trackingId&&(i=o.trackingId),setTimeout((e(r=i),void t.util.log("Sephora One Tag :: Making callback for checkAndCreateSotId :: timeout :: "+t.config.cookieSetTimeout+" :: trackingId in response is :: "+r)),t.config.cookieSetTimeout)}var r},n.open("GET",t.config.baseURL+"/trackingId?apikey="+t.config.apiKey),n.withCredentials=!0,n.send()}},createOrExtendSessionID:function(e){var o=t.util.readCookie("ssi");if(o)t.util.log("Sephora One Tag :: sotSessionId(ssi) found :: "+o),t.util.log("Sephora One Tag :: Extend sotSessionId"),document.cookie="ssi="+o+"; Secure; path=/; domain=sephora.com; max-age=1800";else{var n=t.util.readCookie("sti");n||(n=e);var i=n+"."+(new Date).getTime();t.util.log("Sephora One Tag :: sotSessionId not found"),t.util.log("Sephora One Tag :: Create sotSessionId"),document.cookie="ssi="+i+"; Secure; path=/; domain=sephora.com; max-age=1800"}},callTrackAPI:function(e){for(var o in e)null!==e[o]&&void 0!==e[o]&&""!==e[o]||delete e[o];if(t.config.useSendBeacon&&navigator.sendBeacon){var n=new URLSearchParams(e);navigator.sendBeacon(t.config.baseURL+"/evtQ?"+n.toString(),"null")}else{t.util.log("Sephora One Tag :: Using XHR for transport"),n=new URLSearchParams(e);var i=new XMLHttpRequest;i.onload=function(){i.status>=200&&i.status<300?t.util.log("Sephora One Tag :: Hit successfull!"):t.util.log("Sephone One Tag :: Hit failed.")},i.open("POST",t.config.baseURL+"/evtQ?"+n.toString()),i.setRequestHeader("Content-Type","text/plain"),i.withCredentials=!0,i.send()}},setAllowTracking:function(e){t.setConfig({allowTracking:e})},setUseSendBeacon:function(e){t.setConfig({useSendBeacon:e})},setDebug:function(e){t.setConfig({debug:e})},setBaseURL:function(e){t.setConfig({baseURL:e})},setApiKey:function(e){t.setConfig({apiKey:e})},setCookieSetTimeout:function(e){t.setConfig({cookieSetTimeout:e})}},function(){if("undefined"==typeof sephoraOneTag_cmds)var e=new t.commandQueue;else(e=new t.commandQueue).loadCmds(sephoraOneTag_cmds);window.sephoraOneTag_cmds=e,window.sephoraOneTag_cmds.process()}(),e.exports=t}},t={};function o(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";o(380)})()})();